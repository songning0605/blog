<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>移动端适配总结（二）应用篇 | 前端进阶</title>
    <meta name="generator" content="VuePress 1.5.3">
    
    <meta name="description" content="系统性学习，打造完善的知识体系">
    <link rel="preload" href="/blog/assets/css/0.styles.5dc057b1.css" as="style"><link rel="preload" href="/blog/assets/js/app.d7b4ca64.js" as="script"><link rel="preload" href="/blog/assets/js/2.d2cb7039.js" as="script"><link rel="preload" href="/blog/assets/js/32.af4b30d4.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.b6d45109.js"><link rel="prefetch" href="/blog/assets/js/11.02c66630.js"><link rel="prefetch" href="/blog/assets/js/12.569c81c8.js"><link rel="prefetch" href="/blog/assets/js/13.2933a416.js"><link rel="prefetch" href="/blog/assets/js/14.e8b9a8eb.js"><link rel="prefetch" href="/blog/assets/js/15.cc49f41e.js"><link rel="prefetch" href="/blog/assets/js/16.fcf94bc8.js"><link rel="prefetch" href="/blog/assets/js/17.212491a7.js"><link rel="prefetch" href="/blog/assets/js/18.aba42cee.js"><link rel="prefetch" href="/blog/assets/js/19.7ca76503.js"><link rel="prefetch" href="/blog/assets/js/20.ef709027.js"><link rel="prefetch" href="/blog/assets/js/21.6dec212e.js"><link rel="prefetch" href="/blog/assets/js/22.2175430e.js"><link rel="prefetch" href="/blog/assets/js/23.72b7e27d.js"><link rel="prefetch" href="/blog/assets/js/24.1d369bec.js"><link rel="prefetch" href="/blog/assets/js/25.4a81ae13.js"><link rel="prefetch" href="/blog/assets/js/26.c516e806.js"><link rel="prefetch" href="/blog/assets/js/27.52b8ed02.js"><link rel="prefetch" href="/blog/assets/js/28.7200da10.js"><link rel="prefetch" href="/blog/assets/js/29.317911aa.js"><link rel="prefetch" href="/blog/assets/js/3.47a74f5f.js"><link rel="prefetch" href="/blog/assets/js/30.a92a3e89.js"><link rel="prefetch" href="/blog/assets/js/31.633db90e.js"><link rel="prefetch" href="/blog/assets/js/33.1a6245dc.js"><link rel="prefetch" href="/blog/assets/js/34.73a314bb.js"><link rel="prefetch" href="/blog/assets/js/35.67a47972.js"><link rel="prefetch" href="/blog/assets/js/36.b747b287.js"><link rel="prefetch" href="/blog/assets/js/37.c648cace.js"><link rel="prefetch" href="/blog/assets/js/38.30a84d00.js"><link rel="prefetch" href="/blog/assets/js/39.b63578f8.js"><link rel="prefetch" href="/blog/assets/js/4.3b6a7e49.js"><link rel="prefetch" href="/blog/assets/js/40.3a6f8db1.js"><link rel="prefetch" href="/blog/assets/js/41.9a72472f.js"><link rel="prefetch" href="/blog/assets/js/42.e28f36bb.js"><link rel="prefetch" href="/blog/assets/js/43.d9d88890.js"><link rel="prefetch" href="/blog/assets/js/44.424aa53b.js"><link rel="prefetch" href="/blog/assets/js/45.0556d798.js"><link rel="prefetch" href="/blog/assets/js/46.92a18e35.js"><link rel="prefetch" href="/blog/assets/js/47.56e9f1e4.js"><link rel="prefetch" href="/blog/assets/js/48.4869689c.js"><link rel="prefetch" href="/blog/assets/js/49.8b4ade4a.js"><link rel="prefetch" href="/blog/assets/js/5.bc6e1aa4.js"><link rel="prefetch" href="/blog/assets/js/6.46556db1.js"><link rel="prefetch" href="/blog/assets/js/7.63a358f8.js"><link rel="prefetch" href="/blog/assets/js/8.088f79f0.js"><link rel="prefetch" href="/blog/assets/js/9.6c4360fc.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.5dc057b1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/favicon.png" alt="前端进阶" class="logo"> <span class="site-name can-hide">前端进阶</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/article/" class="nav-link router-link-active">
  文章目录
</a></div><div class="nav-item"><a href="http://www.conardli.top" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/ConardLi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/article/" class="nav-link router-link-active">
  文章目录
</a></div><div class="nav-item"><a href="http://www.conardli.top" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/ConardLi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/article/" aria-current="page" class="sidebar-link">文章目录</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JS进阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React深入系列</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>多端开发</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/article/多端开发/移动端适配总结（二）应用篇.html" class="sidebar-link">移动端适配总结（一）原理篇</a></li><li><a href="/blog/article/多端开发/移动端适配总结（一）原理篇.html" class="active sidebar-link">移动端适配总结（二）应用篇</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/article/多端开发/移动端适配总结（一）原理篇.html#五、1px问题" class="sidebar-link">五、1px问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/article/多端开发/移动端适配总结（一）原理篇.html#_5-1-border-image" class="sidebar-link">5.1 border-image</a></li><li class="sidebar-sub-header"><a href="/blog/article/多端开发/移动端适配总结（一）原理篇.html#_5-2-background-image" class="sidebar-link">5.2 background-image</a></li><li class="sidebar-sub-header"><a href="/blog/article/多端开发/移动端适配总结（一）原理篇.html#_5-3-伪类-transform" class="sidebar-link">5.3 伪类 + transform</a></li><li class="sidebar-sub-header"><a href="/blog/article/多端开发/移动端适配总结（一）原理篇.html#_5-4-svg" class="sidebar-link">5.4 svg</a></li><li class="sidebar-sub-header"><a href="/blog/article/多端开发/移动端适配总结（一）原理篇.html#_5-5-设置viewport" class="sidebar-link">5.5 设置viewport</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/article/多端开发/移动端适配总结（一）原理篇.html#六、移动端适配方案" class="sidebar-link">六、移动端适配方案</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/article/多端开发/移动端适配总结（一）原理篇.html#_6-1-flexible方案" class="sidebar-link">6.1 flexible方案</a></li><li class="sidebar-sub-header"><a href="/blog/article/多端开发/移动端适配总结（一）原理篇.html#_6-2-vh、vw方案" class="sidebar-link">6.2 vh、vw方案</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/article/多端开发/移动端适配总结（一）原理篇.html#七、适配iphonex" class="sidebar-link">七、适配iPhoneX</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/article/多端开发/移动端适配总结（一）原理篇.html#_7-1-安全区域" class="sidebar-link">7.1 安全区域</a></li><li class="sidebar-sub-header"><a href="/blog/article/多端开发/移动端适配总结（一）原理篇.html#_7-2-viewport-fit" class="sidebar-link">7.2 viewport-fit</a></li><li class="sidebar-sub-header"><a href="/blog/article/多端开发/移动端适配总结（一）原理篇.html#_7-3-env、constant" class="sidebar-link">7.3 env、constant</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/article/多端开发/移动端适配总结（一）原理篇.html#八、横屏适配" class="sidebar-link">八、横屏适配</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/article/多端开发/移动端适配总结（一）原理篇.html#_8-1-javascript检测横屏" class="sidebar-link">8.1 JavaScript检测横屏</a></li><li class="sidebar-sub-header"><a href="/blog/article/多端开发/移动端适配总结（一）原理篇.html#_8-2-css检测横屏" class="sidebar-link">8.2 CSS检测横屏</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/article/多端开发/移动端适配总结（一）原理篇.html#九、图片模糊问题" class="sidebar-link">九、图片模糊问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/article/多端开发/移动端适配总结（一）原理篇.html#_9-1-产生原因" class="sidebar-link">9.1 产生原因</a></li><li class="sidebar-sub-header"><a href="/blog/article/多端开发/移动端适配总结（一）原理篇.html#_9-2-解决方案" class="sidebar-link">9.2 解决方案</a></li><li class="sidebar-sub-header"><a href="/blog/article/多端开发/移动端适配总结（一）原理篇.html#_9-3-media查询" class="sidebar-link">9.3 media查询</a></li><li class="sidebar-sub-header"><a href="/blog/article/多端开发/移动端适配总结（一）原理篇.html#_9-4-image-set" class="sidebar-link">9.4 image-set</a></li><li class="sidebar-sub-header"><a href="/blog/article/多端开发/移动端适配总结（一）原理篇.html#_9-5-srcset" class="sidebar-link">9.5 srcset</a></li><li class="sidebar-sub-header"><a href="/blog/article/多端开发/移动端适配总结（一）原理篇.html#_9-6-javascript拼接图片url" class="sidebar-link">9.6 JavaScript拼接图片url</a></li><li class="sidebar-sub-header"><a href="/blog/article/多端开发/移动端适配总结（一）原理篇.html#_9-7-使用svg" class="sidebar-link">9.7 使用svg</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/article/多端开发/移动端适配总结（一）原理篇.html#参考" class="sidebar-link">参考</a></li><li class="sidebar-sub-header"><a href="/blog/article/多端开发/移动端适配总结（一）原理篇.html#小结" class="sidebar-link">小结</a></li></ul></li><li><a href="/blog/article/多端开发/用JS开发桌面应用（一）原理篇.html" class="sidebar-link">用JS开发桌面应用（一）原理篇</a></li><li><a href="/blog/article/多端开发/用JS开发桌面应用（二）基本应用.html" class="sidebar-link">用JS开发桌面应用（二）基本应用</a></li><li><a href="/blog/article/多端开发/用JS开发桌面应用（三）打印篇.html" class="sidebar-link">用JS开发桌面应用（三）打印篇</a></li><li><a href="/blog/article/多端开发/用JS开发桌面应用（四）程序保护.html" class="sidebar-link">用JS开发桌面应用（四）程序保护</a></li><li><a href="/blog/article/多端开发/用JS开发桌面应用（五）终篇.html" class="sidebar-link">用JS开发桌面应用（五）终篇</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器和网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器策略</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端安全</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端工程化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>效果</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>博客搭建</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>综合</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>技术圈</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><blockquote><p>接上篇  【多端开发】移动端适配总结（一）原理篇</p></blockquote> <h2 id="五、1px问题"><a href="#五、1px问题" class="header-anchor">#</a> 五、1px问题</h2> <p>为了适配各种屏幕，我们写代码时一般使用设备独立像素来对页面进行布局。</p> <p>而在设备像素比大于<code>1</code>的屏幕上，我们写的<code>1px</code>实际上是被多个物理像素渲染，这就会出现<code>1px</code>在有些屏幕上看起来很粗的现象。</p> <h3 id="_5-1-border-image"><a href="#_5-1-border-image" class="header-anchor">#</a> 5.1 border-image</h3> <p>基于<code>media</code>查询判断不同的设备像素比给定不同的<code>border-image</code>：</p> <div class="language-css extra-class"><pre class="language-css"><code>       <span class="token selector">.border_1px</span><span class="token punctuation">{</span>
          <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid #000<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">-webkit-min-device-pixel-ratio</span><span class="token punctuation">:</span>2<span class="token punctuation">)</span></span><span class="token punctuation">{</span>
            <span class="token selector">.border_1px</span><span class="token punctuation">{</span>
                <span class="token property">border-bottom</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
                <span class="token property">border-width</span><span class="token punctuation">:</span> 0 0 1px 0<span class="token punctuation">;</span>
                <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>../img/1pxline.png<span class="token punctuation">)</span></span> 0 0 2 0 stretch<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
</code></pre></div><h3 id="_5-2-background-image"><a href="#_5-2-background-image" class="header-anchor">#</a> 5.2 background-image</h3> <p>和<code>border-image</code>类似，准备一张符合条件的边框背景图，模拟在背景上。</p> <div class="language-css extra-class"><pre class="language-css"><code>       <span class="token selector">.border_1px</span><span class="token punctuation">{</span>
          <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid #000<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">-webkit-min-device-pixel-ratio</span><span class="token punctuation">:</span>2<span class="token punctuation">)</span></span><span class="token punctuation">{</span>
            <span class="token selector">.border_1px</span><span class="token punctuation">{</span>
                <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>../img/1pxline.png<span class="token punctuation">)</span></span> repeat-x left bottom<span class="token punctuation">;</span>
                <span class="token property">background-size</span><span class="token punctuation">:</span> 100% 1px<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
</code></pre></div><p>上面两种都需要单独准备图片，而且圆角不是很好处理，但是可以应对大部分场景。</p> <h3 id="_5-3-伪类-transform"><a href="#_5-3-伪类-transform" class="header-anchor">#</a> 5.3 伪类 + transform</h3> <p>基于<code>media</code>查询判断不同的设备像素比对线条进行缩放：</p> <div class="language-css extra-class"><pre class="language-css"><code>       <span class="token selector">.border_1px:before</span><span class="token punctuation">{</span>
          <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">;</span>
          <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
          <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
          <span class="token property">height</span><span class="token punctuation">:</span> 1px<span class="token punctuation">;</span>
          <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
          <span class="token property">background-color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
          <span class="token property">transform-origin</span><span class="token punctuation">:</span> 50% 0%<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">-webkit-min-device-pixel-ratio</span><span class="token punctuation">:</span>2<span class="token punctuation">)</span></span><span class="token punctuation">{</span>
            <span class="token selector">.border_1px:before</span><span class="token punctuation">{</span>
                <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scaleY</span><span class="token punctuation">(</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">-webkit-min-device-pixel-ratio</span><span class="token punctuation">:</span>3<span class="token punctuation">)</span></span><span class="token punctuation">{</span>
            <span class="token selector">.border_1px:before</span><span class="token punctuation">{</span>
                <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scaleY</span><span class="token punctuation">(</span>0.33<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
</code></pre></div><p>这种方式可以满足各种场景，如果需要满足圆角，只需要给伪类也加上<code>border-radius</code>即可。</p> <h3 id="_5-4-svg"><a href="#_5-4-svg" class="header-anchor">#</a> 5.4 svg</h3> <p>上面我们<code>border-image</code>和<code>background-image</code>都可以模拟<code>1px</code>边框，但是使用的都是位图，还需要外部引入。</p> <p>借助<code>PostCSS</code>的<code>postcss-write-svg</code>我们能直接使用<code>border-image</code>和<code>background-image</code>创建<code>svg</code>的<code>1px</code>边框：</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@svg</span> border_1px</span> <span class="token punctuation">{</span> 
  <span class="token property">height</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span> 
  <span class="token atrule"><span class="token rule">@rect</span></span> <span class="token punctuation">{</span> 
    <span class="token property">fill</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--color<span class="token punctuation">,</span> black<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span> 
    <span class="token property">height</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span> 
    <span class="token punctuation">}</span> 
  <span class="token punctuation">}</span> 
<span class="token selector">.example</span> <span class="token punctuation">{</span> <span class="token property">border</span><span class="token punctuation">:</span> 1px solid transparent<span class="token punctuation">;</span> <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token function">svg</span><span class="token punctuation">(</span>border_1px <span class="token function">param</span><span class="token punctuation">(</span>--color #00b1ff<span class="token punctuation">)</span><span class="token punctuation">)</span> 2 2 stretch<span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre></div><p>编译后：</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.example</span> <span class="token punctuation">{</span> <span class="token property">border</span><span class="token punctuation">:</span> 1px solid transparent<span class="token punctuation">;</span> <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' height='2px'%3E%3Crect fill='%2300b1ff' width='100%25' height='50%25'/%3E%3C/svg%3E&quot;</span><span class="token punctuation">)</span></span> 2 2 stretch<span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre></div><p>上面的方案是大漠在他的文章中推荐使用的，基本可以满足所有场景，而且不需要外部引入，这是我个人比较喜欢的一种方案。</p> <h3 id="_5-5-设置viewport"><a href="#_5-5-设置viewport" class="header-anchor">#</a> 5.5 设置viewport</h3> <p>通过设置缩放，让<code>CSS</code>像素等于真正的物理像素。</p> <p>例如：当设备像素比为<code>3</code>时，我们将页面缩放<code>1/3</code>倍，这时<code>1px</code>等于一个真正的屏幕像素。</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">const</span> scale <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> window<span class="token punctuation">.</span>devicePixelRatio<span class="token punctuation">;</span>
    <span class="token keyword">const</span> viewport <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'meta[name=&quot;viewport&quot;]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>viewport<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        viewport <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'meta'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        viewport<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'viewport'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        window<span class="token punctuation">.</span>document<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>viewport<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    viewport<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'content'</span><span class="token punctuation">,</span> <span class="token string">'width=device-width,user-scalable=no,initial-scale='</span> <span class="token operator">+</span> scale <span class="token operator">+</span> <span class="token string">',maximum-scale='</span> <span class="token operator">+</span> scale <span class="token operator">+</span> <span class="token string">',minimum-scale='</span> <span class="token operator">+</span> scale<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>实际上，上面这种方案是早先<code>flexible</code>采用的方案。</p> <p>当然，这样做是要付出代价的，这意味着你页面上所有的布局都要按照物理像素来写。这显然是不现实的，这时，我们可以借助<code>flexible</code>或<code>vw、vh</code>来帮助我们进行适配。</p> <h2 id="六、移动端适配方案"><a href="#六、移动端适配方案" class="header-anchor">#</a> 六、移动端适配方案</h2> <p>尽管我们可以使用设备独立像素来保证各个设备在不同手机上显示的效果类似，但这并不能保证它们显示完全一致，我们需要一种方案来让设计稿得到更完美的适配。</p> <h3 id="_6-1-flexible方案"><a href="#_6-1-flexible方案" class="header-anchor">#</a> 6.1 flexible方案</h3> <p><code>flexible</code>方案是阿里早期开源的一个移动端适配解决方案，引用<code>flexible</code>后，我们在页面上统一使用<code>rem</code>来布局。</p> <p>它的核心代码非常简单：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// set 1rem = viewWidth / 10</span>
<span class="token keyword">function</span> <span class="token function">setRemUnit</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> rem <span class="token operator">=</span> docEl<span class="token punctuation">.</span>clientWidth <span class="token operator">/</span> <span class="token number">10</span>
    docEl<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> rem <span class="token operator">+</span> <span class="token string">'px'</span>
<span class="token punctuation">}</span>
<span class="token function">setRemUnit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>rem</code> 是相对于<code>html</code>节点的<code>font-size</code>来做计算的。</p> <p>我们通过设置<code>document.documentElement.style.fontSize</code>就可以统一整个页面的布局标准。</p> <p>上面的代码中，将<code>html</code>节点的<code>font-size</code>设置为页面<code>clientWidth</code>(布局视口)的<code>1/10</code>，即<code>1rem</code>就等于页面布局视口的<code>1/10</code>，这就意味着我们后面使用的<code>rem</code>都是按照页面比例来计算的。</p> <p>这时，我们只需要将<code>UI</code>出的图转换为<code>rem</code>即可。</p> <p>以<code>iPhone6</code>为例：布局视口为<code>375px</code>，则<code>1rem = 37.5px</code>，这时<code>UI</code>给定一个元素的宽为<code>75px</code>（设备独立像素），我们只需要将它设置为<code>75 / 37.5 = 2rem</code>。</p> <p>当然，每个布局都要计算非常繁琐，我们可以借助<code>PostCSS</code>的<code>px2rem</code>插件来帮助我们完成这个过程。</p> <p>下面的代码可以保证在页面大小变化时，布局可以自适应，当触发了<code>window</code>的<code>resize</code>和<code>pageShow</code>事件之后自动调整<code>html</code>的<code>fontSize</code>大小。</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// reset rem unit on page resize</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> setRemUnit<span class="token punctuation">)</span>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'pageshow'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>persisted<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setRemUnit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>由于<code>viewport</code>单位得到众多浏览器的兼容，上面这种方案现在已经被官方弃用：</p> <blockquote><p>lib-flexible这个过渡方案已经可以放弃使用，不管是现在的版本还是以前的版本，都存有一定的问题。建议大家开始使用viewport来替代此方案。</p></blockquote> <p>下面我们来看看现在最流行的<code>vh、vw</code>方案。</p> <h3 id="_6-2-vh、vw方案"><a href="#_6-2-vh、vw方案" class="header-anchor">#</a> 6.2 vh、vw方案</h3> <p><code>vh、vw</code>方案即将视觉视口宽度 <code>window.innerWidth</code>和视觉视口高度 <code>window.innerHeight</code> 等分为 100 份。</p> <p>上面的<code>flexible</code>方案就是模仿这种方案，因为早些时候<code>vw</code>还没有得到很好的兼容。</p> <ul><li><code>vw(Viewport's width)</code>：<code>1vw</code>等于视觉视口的<code>1%</code></li> <li><code>vh(Viewport's height)</code> :<code>1vh</code> 为视觉视口高度的<code>1%</code></li> <li><code>vmin</code> :  <code>vw</code> 和 <code>vh</code> 中的较小值</li> <li><code>vmax</code> : 选取 <code>vw</code> 和 <code>vh</code> 中的较大值</li></ul> <p><img src="https://i.loli.net/2019/05/17/5cddf1f0e18bb53584.png" alt=""></p> <p>如果视觉视口为<code>375px</code>，那么<code>1vw = 3.75px</code>，这时<code>UI</code>给定一个元素的宽为<code>75px</code>（设备独立像素），我们只需要将它设置为<code>75 / 3.75 = 20vw</code>。</p> <p>这里的比例关系我们也不用自己换算，我们可以使用<code>PostCSS</code>的 <code>postcss-px-to-viewport</code> 插件帮我们完成这个过程。写代码时，我们只需要根据<code>UI</code>给的设计图写<code>px</code>单位即可。</p> <p>当然，没有一种方案是十全十美的，<code>vw</code>同样有一定的缺陷：</p> <ul><li><code>px</code>转换成<code>vw</code>不一定能完全整除，因此有一定的像素差。</li> <li>比如当容器使用<code>vw</code>，<code>margin</code>采用<code>px</code>时，很容易造成整体宽度超过<code>100vw</code>，从而影响布局效果。当然我们也是可以避免的，例如使用<code>padding</code>代替<code>margin</code>，结合<code>calc()</code>函数使用等等...</li></ul> <h2 id="七、适配iphonex"><a href="#七、适配iphonex" class="header-anchor">#</a> 七、适配iPhoneX</h2> <p><code>iPhoneX</code>的出现将手机的颜值带上了一个新的高度，它取消了物理按键，改成了底部的小黑条，但是这样的改动给开发者适配移动端又增加了难度。</p> <h3 id="_7-1-安全区域"><a href="#_7-1-安全区域" class="header-anchor">#</a> 7.1 安全区域</h3> <p>在<code>iPhoneX</code>发布后，许多厂商相继推出了具有边缘屏幕的手机。</p> <p><img src="https://i.loli.net/2019/05/17/5cddf1e78a7c870328.png" alt=""></p> <p>这些手机和普通手机在外观上无外乎做了三个改动：圆角（<code>corners</code>）、刘海（<code>sensor housing</code>）和小黑条（<code>Home Indicator</code>）。为了适配这些手机，安全区域这个概念变诞生了：安全区域就是一个不受上面三个效果的可视窗口范围。</p> <p>为了保证页面的显示效果，我们必须把页面限制在安全范围内，但是不影响整体效果。</p> <h3 id="_7-2-viewport-fit"><a href="#_7-2-viewport-fit" class="header-anchor">#</a> 7.2 viewport-fit</h3> <p><code>viewport-fit</code>是专门为了适配<code>iPhoneX</code>而诞生的一个属性，它用于限制网页如何在安全区域内进行展示。</p> <p><img src="https://i.loli.net/2019/05/17/5cddf1a74a74578018.png" alt=""></p> <p><code>contain</code>: 可视窗口完全包含网页内容</p> <p><code>cover</code>：网页内容完全覆盖可视窗口</p> <p>默认情况下或者设置为<code>auto</code>和<code>contain</code>效果相同。</p> <h3 id="_7-3-env、constant"><a href="#_7-3-env、constant" class="header-anchor">#</a> 7.3 env、constant</h3> <p><img src="https://i.loli.net/2019/05/17/5cddf1b63010c69640.png" alt=""></p> <p>我们需要将顶部和底部合理的摆放在安全区域内，<code>iOS11</code>新增了两个<code>CSS</code>函数<code>env、constant</code>，用于设定安全区域与边界的距离。</p> <p>函数内部可以是四个常量：</p> <ul><li><code>safe-area-inset-left</code>：安全区域距离左边边界距离</li> <li><code>safe-area-inset-right</code>：安全区域距离右边边界距离</li> <li><code>safe-area-inset-top</code>：安全区域距离顶部边界距离</li> <li><code>safe-area-inset-bottom</code>：安全区域距离底部边界距离</li></ul> <p>注意：我们必须指定<code>viweport-fit</code>后才能使用这两个函数：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport-fit=cover<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>constant</code>在<code>iOS &lt; 11.2</code>的版本中生效，<code>env</code>在<code>iOS &gt;= 11.2</code>的版本中生效，这意味着我们往往要同时设置他们，将页面限制在安全区域内：</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">padding-bottom</span><span class="token punctuation">:</span> <span class="token function">constant</span><span class="token punctuation">(</span>safe-area-inset-bottom<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">padding-bottom</span><span class="token punctuation">:</span> <span class="token function">env</span><span class="token punctuation">(</span>safe-area-inset-bottom<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>当使用底部固定导航栏时，我们要为他们设置<code>padding</code>值：</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token punctuation">{</span>
  <span class="token property">padding-bottom</span><span class="token punctuation">:</span> <span class="token function">constant</span><span class="token punctuation">(</span>safe-area-inset-bottom<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">padding-bottom</span><span class="token punctuation">:</span> <span class="token function">env</span><span class="token punctuation">(</span>safe-area-inset-bottom<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="八、横屏适配"><a href="#八、横屏适配" class="header-anchor">#</a> 八、横屏适配</h2> <p><img src="https://i.loli.net/2019/05/17/5cddf20178d8c32612.png" alt=""></p> <p>很多视口我们要对横屏和竖屏显示不同的布局，所以我们需要检测在不同的场景下给定不同的样式：</p> <h3 id="_8-1-javascript检测横屏"><a href="#_8-1-javascript检测横屏" class="header-anchor">#</a> 8.1 JavaScript检测横屏</h3> <p><code>window.orientation</code>:获取屏幕旋转方向</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;resize&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>orientation <span class="token operator">===</span> <span class="token number">180</span> <span class="token operator">||</span> window<span class="token punctuation">.</span>orientation <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
      <span class="token comment">// 正常方向或屏幕旋转180度</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'竖屏'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>orientation <span class="token operator">===</span> <span class="token number">90</span> <span class="token operator">||</span> window<span class="token punctuation">.</span>orientation <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">90</span> <span class="token punctuation">)</span><span class="token punctuation">{</span> 
       <span class="token comment">// 屏幕顺时钟旋转90度或屏幕逆时针旋转90度</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'横屏'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>  
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre></div><h3 id="_8-2-css检测横屏"><a href="#_8-2-css检测横屏" class="header-anchor">#</a> 8.2 CSS检测横屏</h3> <div class="language-js extra-class"><pre class="language-js"><code>@media screen <span class="token function">and</span> <span class="token punctuation">(</span><span class="token parameter">orientation<span class="token operator">:</span> portrait</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">/*竖屏...*/</span>
<span class="token punctuation">}</span> 
@media screen <span class="token function">and</span> <span class="token punctuation">(</span><span class="token parameter">orientation<span class="token operator">:</span> landscape</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">/*横屏...*/</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="九、图片模糊问题"><a href="#九、图片模糊问题" class="header-anchor">#</a> 九、图片模糊问题</h2> <h3 id="_9-1-产生原因"><a href="#_9-1-产生原因" class="header-anchor">#</a> 9.1 产生原因</h3> <p>我们平时使用的图片大多数都属于位图（<code>png、jpg...</code>），位图由一个个像素点构成的，每个像素都具有特定的位置和颜色值：</p> <p><img src="https://i.loli.net/2019/05/17/5cddf1ea88e2190952.png" alt=""></p> <p>理论上，位图的每个像素对应在屏幕上使用一个物理像素来渲染，才能达到最佳的显示效果。</p> <p>而在<code>dpr &gt; 1</code>的屏幕上，位图的一个像素可能由多个物理像素来渲染，然而这些物理像素点并不能被准确的分配上对应位图像素的颜色，只能取近似值，所以相同的图片在<code>dpr &gt; 1</code>的屏幕上就会模糊:</p> <p><img src="https://i.loli.net/2019/05/17/5cddf1ebd33ce27972.jpg" alt=""></p> <h3 id="_9-2-解决方案"><a href="#_9-2-解决方案" class="header-anchor">#</a> 9.2 解决方案</h3> <p>为了保证图片质量，我们应该尽可能让一个屏幕像素来渲染一个图片像素，所以，针对不同<code>DPR</code>的屏幕，我们需要展示不同分辨率的图片。</p> <p>如：在<code>dpr=2</code>的屏幕上展示两倍图<code>(@2x)</code>，在<code>dpr=3</code>的屏幕上展示三倍图<code>(@3x)</code>。</p> <p><img src="https://i.loli.net/2019/05/17/5cddf1ee82d2b57483.png" alt=""></p> <h3 id="_9-3-media查询"><a href="#_9-3-media查询" class="header-anchor">#</a> 9.3 media查询</h3> <p>使用<code>media</code>查询判断不同的设备像素比来显示不同精度的图片：</p> <div class="language-css extra-class"><pre class="language-css"><code>       <span class="token selector">.avatar</span><span class="token punctuation">{</span>
            <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>conardLi_1x.png<span class="token punctuation">)</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">-webkit-min-device-pixel-ratio</span><span class="token punctuation">:</span>2<span class="token punctuation">)</span></span><span class="token punctuation">{</span>
            <span class="token selector">.avatar</span><span class="token punctuation">{</span>
                <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>conardLi_2x.png<span class="token punctuation">)</span></span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">-webkit-min-device-pixel-ratio</span><span class="token punctuation">:</span>3<span class="token punctuation">)</span></span><span class="token punctuation">{</span>
            <span class="token selector">.avatar</span><span class="token punctuation">{</span>
                <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>conardLi_3x.png<span class="token punctuation">)</span></span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
</code></pre></div><blockquote><p>只适用于背景图</p></blockquote> <h3 id="_9-4-image-set"><a href="#_9-4-image-set" class="header-anchor">#</a> 9.4 image-set</h3> <p>使用<code>image-set</code>：</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.avatar</span> <span class="token punctuation">{</span>
    <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">-webkit-image-set</span><span class="token punctuation">(</span> <span class="token string">&quot;conardLi_1x.png&quot;</span> 1x<span class="token punctuation">,</span> <span class="token string">&quot;conardLi_2x.png&quot;</span> 2x <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>只适用于背景图</p></blockquote> <h3 id="_9-5-srcset"><a href="#_9-5-srcset" class="header-anchor">#</a> 9.5 srcset</h3> <p>使用<code>img</code>标签的<code>srcset</code>属性，浏览器会自动根据像素密度匹配最佳显示图片：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>conardLi_1x.png<span class="token punctuation">&quot;</span></span>
     <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span> conardLi_2x.png 2x, conardLi_3x.png 3x<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h3 id="_9-6-javascript拼接图片url"><a href="#_9-6-javascript拼接图片url" class="header-anchor">#</a> 9.6 JavaScript拼接图片url</h3> <p>使用<code>window.devicePixelRatio</code>获取设备像素比，遍历所有图片，替换图片地址：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> dpr <span class="token operator">=</span> window<span class="token punctuation">.</span>devicePixelRatio<span class="token punctuation">;</span>
<span class="token keyword">const</span> images <span class="token operator">=</span>  document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
images<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">img</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  img<span class="token punctuation">.</span>src<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">@</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dpr<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">x.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_9-7-使用svg"><a href="#_9-7-使用svg" class="header-anchor">#</a> 9.7 使用svg</h3> <p><code>SVG</code>的全称是可缩放矢量图（<code>Scalable Vector Graphics</code>）。不同于位图的基于像素，<code>SVG</code> 则是属于对图像的形状描述，所以它本质上是文本文件，体积较小，且不管放大多少倍都不会失真。</p> <p><img src="https://i.loli.net/2019/05/17/5cddf1f59b24a71558.png" alt=""></p> <p>除了我们手动在代码中绘制<code>svg</code>，我们还可以像使用位图一样使用<code>svg</code>图片：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">&quot;conardLi.svg&quot;</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">&quot;data:image/svg+xml;base64,[data]&quot;</span><span class="token operator">&gt;</span>

<span class="token punctuation">.</span>avatar <span class="token punctuation">{</span>
  background<span class="token operator">:</span> <span class="token function">url</span><span class="token punctuation">(</span>conardLi<span class="token punctuation">.</span>svg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h2> <ul><li>https://99designs.com/blog/tips/ppi-vs-dpi-whats-the-difference/</li> <li>https://www.w3cplus.com/css/vw-for-layout.html</li> <li>https://aotu.io/notes/2017/11/27/iphonex/index.html</li></ul> <h2 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h2> <p>希望你阅读本篇文章后可以达到以下几点：</p> <ul><li>理清移动端适配常用概念</li> <li>理解移动端适配问题产生的原理，至少掌握一种解决方案</li></ul> <p>文中如有错误，欢迎在评论区指正，如果这篇文章帮助到了你，欢迎点赞和关注。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/article/多端开发/移动端适配总结（二）应用篇.html" class="prev">
        移动端适配总结（一）原理篇
      </a></span> <span class="next"><a href="/blog/article/多端开发/用JS开发桌面应用（一）原理篇.html">
        用JS开发桌面应用（一）原理篇
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.d7b4ca64.js" defer></script><script src="/blog/assets/js/2.d2cb7039.js" defer></script><script src="/blog/assets/js/32.af4b30d4.js" defer></script>
  </body>
</html>
